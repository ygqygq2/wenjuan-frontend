import{u as Be,a as z,b as w,r as i,o as ge,c as Qe,m as x,d as Ge,e as U,f as Y,j as e,S as _,U as Ke,B as m,L as A,g as y,F as Ve,T as E,h as je,i as R,O as Z,P as We,D as _e,k as Ye,l as K,n as ye,C as ie,p as S,q as Se,I as L,R as Ze,s as M,t as O,E as Je,v as Xe,w as et,x as tt,y as st,z as nt,A as ve,M as Ce,G as J,H as at,J as X,K as rt,N as ot,Q as ct,V as it,W as lt,X as dt,Y as ut,Z as ht,_ as mt,$ as pt,a0 as ft,a1 as xt,a2 as gt}from"./vendor-0bfa93f8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const jt="modulepreload",_t=function(t){return"/"+t},le={},we=function(s,n,r){if(!n||n.length===0)return s();const a=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=_t(o),o in le)return;le[o]=!0;const c=o.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!r)for(let h=a.length-1;h>=0;h--){const d=a[h];if(d.href===o&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":jt,c||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),c)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>s()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})},Ie="/",T="/login",ee="/register",H="/manage/list",q=10,F="keyword",V="page",W="pageSize",Hs=10,Bs=["#ff2d2d","#be77ff","#2894ff","#00ec00","#eac100","#ff9d6f"],te="USER_TOKEN",se=()=>Be(s=>s.user);function ne(t){const{pathname:s}=z(),n=w();i.useEffect(()=>{if(t.waitingUserData&&!t.isLogin)return;if(t.isLogin){if(ks(s)){n(H);return}return}As(s)||n(T)},[t,s,n])}function yt(t){localStorage.setItem(te,t)}function ae(){return localStorage.getItem(te)||""}function St(){localStorage.removeItem(te)}function vt(t){if(!t)return!0;const n=ge(t).exp*1e3;return Date.now()>n}const v=Qe.create({baseURL:"https://wenjuan.datcn.com",timeout:10*1e3});v.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${ae()}`,t),t=>Promise.reject(t));v.interceptors.response.use(t=>{const s=t.data||{},{errno:n,data:r,msg:a}=s;if(n!==0)throw a&&x.error(a),new Error(a);return r});async function Le(){const t=ae();if(!t)return Promise.reject(new Error("用户未登录"));const s=ge(t),n=s.sub,{username:r}=s,a="/api/user/profile";return await v.get(a,{params:{id:n,username:r}})}async function Ct(t,s,n){const r="/api/auth/register",a={username:t,password:s,nickname:n||t};return await v.post(r,a)}async function wt(t,s){const n="/api/auth/login",r={username:t,password:s};return await v.post(n,r)}const re={username:"",nickname:"",waitingUserData:!1,isLogin:!1},oe=Ge("user/fetchUserData",async()=>{var n;const t=await Le(),{username:s}=t;if(s){const r=((n=t==null?void 0:t.profile)==null?void 0:n.nickname)||s;return{username:s,nickname:r,waitingUserData:!1,isLogin:!0}}return{...re,waitingUserData:!1,isLogin:!1}}),It=ae(),Lt=!vt(It),Tt={...re,isLogin:Lt},Te=U({name:"user",initialState:Tt,reducers:{loginReducer:(t,s)=>s.payload,logoutReducer:()=>re},extraReducers:t=>{t.addCase(oe.fulfilled,(s,n)=>({...s,...n.payload}))}}),{loginReducer:de,logoutReducer:Et}=Te.actions,Pt=Te.reducer,Nt=()=>{const t=w(),s=Y();i.useEffect(()=>{(async()=>{try{s(oe())}catch{x.error("获取用户信息失败")}})()},[]);const n=se();ne(n);function r(){s(Et()),St(),x.success("退出成功"),t(T)}const a=e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#e8e8e8"},children:e.jsxs(_,{children:[e.jsx(Ke,{}),n.nickname]})}),e.jsx(m,{type:"link",onClick:r,children:"退出"})]}),o=e.jsx(A,{to:T,children:"登录"});return e.jsx("div",{children:n.isLogin?a:o})};function Ee(){const t=Y(),{run:s}=y(Le,{manual:!0,onSuccess(a){const{username:o}=a,c=a.profile.nickname||o;t(de({username:o,nickname:c,isLogin:!0,waitingUserData:!1}))}}),n=se(),{username:r}=n;return i.useEffect(()=>{r||(t(de({...n,waitingUserData:!0})),s())},[r]),n}const bt="_container_16lq5_1",kt={container:bt},{Title:ue}=E,At=()=>{const{username:t}=se(),[s,n]=i.useState(Ie);return i.useEffect(()=>{t&&n(H)},[t]),e.jsx(e.Fragment,{children:e.jsx("div",{className:kt.container,children:e.jsx(A,{to:s,children:e.jsxs(_,{children:[e.jsx(ue,{children:e.jsx(Ve,{})}),e.jsx(ue,{children:"问卷调查"})]})})})})},Rt="_header_16um6_1",$t="_left_16um6_4",Dt="_right_16um6_7",Ot="_main_16um6_11",qt="_footer_16um6_15",k={header:Rt,left:$t,right:Dt,main:Ot,footer:qt},{Header:Ft,Content:zt,Footer:Ut}=je,Mt=()=>{const t=Ee();return ne(t),e.jsx(e.Fragment,{children:e.jsxs(je,{children:[e.jsxs(Ft,{className:k.header,children:[e.jsx("div",{className:k.left,children:e.jsx(At,{})}),e.jsx("div",{className:k.right,children:e.jsx(Nt,{})})]}),e.jsx(zt,{className:k.main,children:t.waitingUserData&&t.isLogin?e.jsx("div",{style:{textAlign:"center",marginTop:"60px"},children:e.jsx(R,{})}):e.jsx(Z,{})}),e.jsx(Ut,{className:k.footer,children:"问卷调查 ©2023 - present. Created by ygqygq2"})]})})};async function Qs(t){const s=`/api/question/${t}`;return await v.get(s)}async function Ht(){const t="/api/question";return await v.post(t)}async function Pe(t={}){const s="/api/question";return await v.get(s,{params:t})}async function D(t,s){const n=`/api/question/${t}`;return await v.patch(n,s)}async function Bt(t){const s=`/api/question/duplicate/${t}`;return await v.post(s)}async function Qt(t){const s="/api/question";return await v.delete(s,{data:{ids:t}})}const Gt="_container_14zsz_1",Kt="_left_14zsz_8",Vt="_right_14zsz_12",G={container:Gt,left:Kt,right:Vt},Wt=()=>{const t=w(),{pathname:s}=z(),{loading:n,run:r}=y(Ht,{manual:!0,onSuccess(a){t(`/question/edit/${a.id}`),x.success("来到创建页面成功")},onError(){x.error("无法创建问卷，请稍后再试")}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:G.container,children:[e.jsx("div",{className:G.left,children:e.jsxs(_,{direction:"vertical",children:[e.jsx(m,{type:"primary",size:"large",icon:e.jsx(We,{}),onClick:r,disabled:n,children:"新建问卷"}),e.jsx(_e,{style:{borderTop:"transparent"}}),e.jsx(m,{type:s.startsWith("/manage/list")?"default":"text",size:"large",icon:e.jsx(Ye,{}),onClick:()=>t("/manage/list"),children:"我的问卷"}),e.jsx(m,{type:s.startsWith("/manage/star")?"default":"text",size:"large",icon:e.jsx(K,{}),onClick:()=>t("/manage/star"),children:"星标问卷"}),e.jsx(m,{type:s.startsWith("/manage/trash")?"default":"text",size:"large",icon:e.jsx(ye,{}),onClick:()=>t("/manage/trash"),children:"回收站"})]})}),e.jsx("div",{className:G.right,children:e.jsx(Z,{})})]})})},Yt=()=>{const t=Ee();return ne(t),e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"100vh"},children:t.waitingUserData&&t.isLogin?e.jsx("div",{style:{textAlign:"center",marginTop:"60px"},children:e.jsx(R,{})}):e.jsx(Z,{})})})},Zt="_container_xmcmt_1",Jt="_info_xmcmt_9",he={container:Zt,info:Jt},{Title:Xt,Paragraph:es}=E,ts=()=>{const t=w();return e.jsx(e.Fragment,{children:e.jsx("div",{className:he.container,children:e.jsxs("div",{className:he.info,children:[e.jsx(Xt,{children:"问卷调查 | 在线投票"}),e.jsx(es,{children:"已累计创建问卷 300 份，发布问卷 100份，收到答卷 1000 份"}),e.jsx("div",{children:e.jsx(m,{type:"primary",onClick:()=>t(H),children:"开始使用"})})]})})})},Ne=t=>ie.SHA256(`${t}${{}.CRYPTO_SECRET}`).toString(ie.enc.Hex),ss="_container_8yfqb_1",ns={container:ss},{Title:me}=E,as="test123",rs="123456",os=()=>{const t=Y(),[s]=S.useForm();i.useEffect(()=>{s.setFieldsValue({username:as,password:rs})},[]);const{run:n}=y(async(a,o)=>{const c=Ne(o);return await wt(a,c)},{manual:!0,onSuccess(a){const{token:o=""}=a;yt(o),x.success("登录成功"),t(oe())}}),r=async a=>{const{username:o,password:c}=a||{};n(o,c)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:ns.container,children:[e.jsx("div",{children:e.jsxs(_,{children:[e.jsx(me,{level:2,children:e.jsx(Se,{})}),e.jsx(me,{level:2,children:"用户登录"})]})}),e.jsx("div",{children:e.jsxs(S,{labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:r,form:s,children:[e.jsx(S.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能是字母数字下划线"}],children:e.jsx(L,{})}),e.jsx(S.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(L.Password,{})}),e.jsx(S.Item,{wrapperCol:{offset:6,span:16},children:e.jsxs(_,{children:[e.jsx(m,{type:"primary",htmlType:"submit",children:"登录"}),e.jsx(A,{to:ee,children:"注册新用户"})]})})]})})]})})},cs=()=>{const t=w();return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"NotFound"}),e.jsx(Ze,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:e.jsx(m,{type:"primary",onClick:()=>t(H),children:"返回首页"})})]})},is="_container_8yfqb_1",ls={container:is},{Title:pe}=E,ds=()=>{const t=w(),{run:s}=y(async r=>{const{username:a,password:o,nickname:c}=r,l=Ne(o);await Ct(a,l,c)},{manual:!0,onSuccess(){x.success("注册成功"),t(T)}}),n=r=>{s(r)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:ls.container,children:[e.jsx("div",{children:e.jsxs(_,{children:[e.jsx(pe,{level:2,children:e.jsx(Se,{})}),e.jsx(pe,{level:2,children:"注册新用户"})]})}),e.jsx("div",{children:e.jsxs(S,{labelCol:{span:6},wrapperCol:{span:16},onFinish:n,children:[e.jsx(S.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"用户名长度在 5-20 之间"},{pattern:/^\w+$/,message:"用户名只能包含字母、数字和下划线"}],children:e.jsx(L,{})}),e.jsx(S.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(L.Password,{})}),e.jsx(S.Item,{label:"确认密码",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"请输入密码"},({getFieldValue:r})=>({validator(a,o){return!o||r("password")===o?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:e.jsx(L.Password,{})}),e.jsx(S.Item,{label:"昵称",name:"nickname",children:e.jsx(L,{})}),e.jsx(S.Item,{wrapperCol:{offset:6,span:16},children:e.jsxs(_,{children:[e.jsx(m,{type:"primary",htmlType:"submit",children:"注册"}),e.jsx(A,{to:T,children:"已有帐户，登录"})]})})]})})]})})},{Search:us}=L,ce=()=>{const t=w(),{pathname:s}=z(),[n,r]=i.useState("");function a(l){r(l.target.value)}const[o]=M();i.useEffect(()=>{const l=o.get(F)||"";r(l)},[o]);function c(l){t({pathname:s,search:`${F}=${l}`})}return e.jsx(e.Fragment,{children:e.jsx(us,{size:"large",allowClear:!0,placeholder:"输入关键字",value:n,onChange:a,onSearch:c,style:{width:"260px"}})})},hs="_container_120bc_1",ms="_title_120bc_11",ps="_left_120bc_14",fs="_right_120bc_17",I={container:hs,title:ms,left:ps,right:fs,"button-container":"_button-container_120bc_23"},{confirm:xs}=Ce,be=t=>{const s=w(),{_id:n,title:r,createdAt:a,answerCount:o,isPublished:c,isStar:l,onDelete:f}=t,u={timeZone:"Asia/Shanghai"},h=new Date(a).toLocaleString("zh-CN",u),[d,g]=i.useState(c),{loading:$,run:N}=y(async()=>{await D(n,{isPublished:!d})},{manual:!0,onSuccess(){g(!d),x.success("已更新")}}),[P,B]=i.useState(l),{loading:j,run:C}=y(async()=>{await D(n,{isStar:!P})},{manual:!0,onSuccess(){B(!P),x.success("已更新")}}),{loading:b,run:Oe}=y(async()=>Bt(n),{manual:!0,onSuccess(Q){x.success("复制成功"),s(`/question/edit/${Q.id}`,{state:{fetchBackendData:!0}})}}),[qe,Fe]=i.useState(!1),{loading:ze,run:Ue}=y(async()=>D(n,{isDeleted:!0}),{manual:!0,onSuccess(){x.success("删除成功"),Fe(!0),He(n)}});function Me(){xs({title:"确定删除该问卷？",icon:e.jsx(ve,{}),onOk:Ue})}function He(Q){f(Q)}return qe?null:e.jsxs("div",{className:I.container,children:[e.jsxs("div",{className:I.title,children:[e.jsx("div",{className:I.left,children:e.jsx(A,{to:c?`/question/stat/${n}`:`/question/edit/${n}`,children:e.jsxs(_,{children:[P&&e.jsx(K,{style:{color:"red"}}),r]})})}),e.jsx("div",{className:I.right,children:e.jsxs(_,{children:[d?e.jsx(O,{color:"processing",children:"已发布"}):e.jsx(O,{children:"未发布"}),e.jsxs("span",{children:["答卷: ",o]}),e.jsx("span",{children:h})]})})]}),e.jsx(_e,{style:{margin:"12px 0"}}),e.jsxs("div",{className:I["button-container"],children:[e.jsx("div",{className:I.left,children:e.jsxs(_,{children:[e.jsx(m,{icon:e.jsx(Je,{}),type:"text",size:"small",onClick:()=>s(`/question/edit/${n}`,{state:{fetchBackendData:!0}}),children:"编辑问卷"}),e.jsx(m,{icon:e.jsx(Xe,{}),type:"text",size:"small",onClick:()=>s(`/question/stat/${n}`),disabled:!d,children:"问卷统计"})]})}),e.jsx("div",{className:I.right,children:e.jsxs(_,{children:[e.jsx(m,{type:"text",icon:d?e.jsx(et,{}):e.jsx(tt,{}),size:"small",onClick:N,disabled:$,children:d?"停止":"发布"}),e.jsx(m,{type:"text",icon:e.jsx(K,{}),size:"small",onClick:C,disabled:j,children:P?"取消标星":"标星"}),e.jsx(st,{title:"确定复制该问卷？",okText:"确定",cancelText:"取消",onConfirm:Oe,children:e.jsx(m,{type:"text",icon:e.jsx(nt,{}),size:"small",disabled:b,children:"复制"})}),e.jsx(m,{type:"text",icon:e.jsx(ye,{}),size:"small",onClick:Me,disabled:ze,children:"删除"})]})})]})]})},gs="_header_rqsal_1",js="_left_rqsal_5",_s="_right_rqsal_8",ys="_content_rqsal_13",Ss="_footer_rqsal_17",p={header:gs,left:js,right:_s,content:ys,footer:Ss},{Title:vs}=E,Cs=()=>{J("问卷调查 - 我的问卷");const[t,s]=i.useState(!1),[n,r]=i.useState(1),[a,o]=i.useState([]),[c,l]=i.useState(0),f=c>a.length,[u]=M(),h=u.get(F)||"";i.useEffect(()=>{s(!1),r(1),o([]),l(0)},[h]);const{run:d,loading:g}=y(async()=>await Pe({page:n,pageSize:q,keyword:h}),{manual:!0,onSuccess(j){const{list:C=[],total:b=0}=j;o(a.concat(C)),l(b),r(n+1)}}),$=i.useRef(null),{run:N}=at(()=>{const j=$.current;if(j===null)return;const C=j.getBoundingClientRect();if(C===null)return;const{bottom:b}=C;b<=document.body.clientHeight&&(d(),s(!0))},{wait:1e3});i.useEffect(()=>{N()},[u]),i.useEffect(()=>(f&&window.addEventListener("scroll",N),()=>{window.removeEventListener("scroll",N)}),[u,f]);const P=i.useMemo(()=>!t||g?e.jsx(R,{}):c===0?e.jsx(X,{description:"暂无数据"}):f?e.jsx("span",{children:"开始加载下一页"}):e.jsx("span",{children:"没有更多了..."}),[t,g,f]),B=j=>{o(a.filter(C=>C._id!==j))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.header,children:[e.jsx("div",{className:p.left,children:e.jsx(vs,{level:3,children:"我的问卷"})}),e.jsx("div",{className:p.right,children:e.jsx(ce,{})})]}),e.jsx("div",{className:p.content,children:a.length>0&&a.map(j=>{const{_id:C}=j;return e.jsx(be,{...j,onDelete:B},C)})}),e.jsx("div",{className:p.footer,children:e.jsx("div",{ref:$,children:P})})]})},ke=t=>{const{total:s}=t,[n,r]=i.useState(1),[a,o]=i.useState(q),[c]=M();i.useEffect(()=>{const h=parseInt(c.get(V)||"",10)||1;r(h);const d=parseInt(c.get(W)||"",10)||q;o(d)},[c]);const l=w(),{pathname:f}=z();function u(h,d){c.set(V,h.toString()),c.set(W,d.toString()),l({pathname:f,search:c.toString()})}return e.jsx(e.Fragment,{children:e.jsx(rt,{current:n,pageSize:a,total:s,onChange:u})})};function Ae(t={}){const{isStar:s,isDeleted:n}=t,[r]=M(),{data:a,loading:o,error:c,refresh:l}=y(async()=>{const f=r.get(F)||"",u=parseInt(r.get(V)||"",10)||1,h=parseInt(r.get(W)||"",10)||q;return await Pe({keyword:f,isStar:s,isDeleted:n,page:u,pageSize:h})},{refreshDeps:[r]});return{data:a,loading:o,error:c,refresh:l}}const{Title:ws}=E,Is=()=>{J("问卷调查 - 星标问卷");const{data:t={},loading:s}=Ae({isStar:!0}),{list:n=[],total:r=0}=t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.header,children:[e.jsx("div",{className:p.left,children:e.jsx(ws,{level:3,children:"星标问卷"})}),e.jsx("div",{className:p.right,children:e.jsx(ce,{})})]}),e.jsxs("div",{className:p.content,children:[s&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{})}),!s&&n.length===0&&e.jsx(X,{description:"暂无数据"}),n.length>0&&n.map(a=>{const{_id:o}=a;return e.jsx(be,{...a},o)})]}),e.jsx("div",{className:p.footer,children:e.jsx(ke,{total:r})})]})},{Title:Ls}=E,{confirm:Ts}=Ce,Es=()=>{J("问卷调查 - 回收站");const{data:t={},loading:s,refresh:n}=Ae({isDeleted:!0}),{list:r=[],total:a=0}=t,[o,c]=i.useState([]),{run:l}=y(async()=>{for await(const g of o)await D(g,{isDeleted:!1})},{manual:!0,debounceWait:500,onSuccess(){x.success("恢复成功"),n(),c([])}}),{run:f}=y(async()=>Qt(o),{manual:!0,onSuccess(){x.success("删除成功"),n(),c([])}});function u(){Ts({title:"确认彻底删除该问卷？",icon:e.jsx(ve,{}),content:"删除以后不可以找回",onOk:f})}const h=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:g=>g?e.jsx(O,{color:"processing",children:"已发布"}):e.jsx(O,{children:"未发布"})},{title:"答卷",dataIndex:"answerCount"},{title:"创建时间",dataIndex:"createdAt"}],d=e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs(_,{children:[e.jsx(m,{type:"primary",disabled:o.length===0,onClick:l,children:"恢复"}),e.jsx(m,{danger:!0,disabled:o.length===0,onClick:u,children:"彻底删除"})]})}),e.jsx("div",{style:{border:"1px solid #e8e8e8"},children:e.jsx(ot,{dataSource:r,columns:h,pagination:!1,rowKey:g=>g._id,rowSelection:{type:"checkbox",onChange:g=>{c(g)}}})})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.header,children:[e.jsx("div",{className:p.left,children:e.jsx(Ls,{level:3,children:"回收站"})}),e.jsx("div",{className:p.right,children:e.jsx(ce,{})})]}),e.jsxs("div",{className:p.content,children:[s&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(R,{})}),!s&&r.length===0&&e.jsx(X,{description:"暂无数据"}),r.length>0&&d]}),e.jsx("div",{className:p.footer,children:e.jsx(ke,{total:a})})]})},Ps=i.lazy(()=>we(()=>import("./index-03760fd4.js"),["assets/index-03760fd4.js","assets/vendor-0bfa93f8.js","assets/useGetComponentInfo-457f2789.js","assets/index-8941ffe6.css"])),Ns=i.lazy(()=>we(()=>import("./index-ff89fd23.js"),["assets/index-ff89fd23.js","assets/vendor-0bfa93f8.js","assets/useGetComponentInfo-457f2789.js","assets/index-91d7967b.css"])),bs=ct([{path:"/",element:e.jsx(Mt,{}),children:[{path:"/",element:e.jsx(ts,{})},{path:"/login",element:e.jsx(os,{})},{path:"/register",element:e.jsx(ds,{})},{path:"manage",element:e.jsx(Wt,{}),children:[{path:"list",element:e.jsx(Cs,{})},{path:"star",element:e.jsx(Is,{})},{path:"trash",element:e.jsx(Es,{})}]},{path:"*",element:e.jsx(cs,{})}]},{path:"question",element:e.jsx(Yt,{}),children:[{path:"edit/:id",element:e.jsx(Ps,{})},{path:"stat/:id",element:e.jsx(Ns,{})}]}]);function ks(t){return!![T,ee].includes(t)}function As(t){return!![Ie,T,ee].includes(t)}function Rs(){return e.jsx(it,{router:bs})}const $s=[],Re=U({name:"answerRoles",initialState:$s,reducers:{resetAnswerRoles:(t,s)=>s.payload,changeAnswerRoles:(t,s)=>{t.splice(0,t.length,...s.payload)}}}),{resetAnswerRoles:Gs,changeAnswerRoles:Ks}=Re.actions,Ds=Re.reducer;function fe(t,s){const n=s.filter(c=>!c.isHidden),r=n.findIndex(c=>c.fe_id===t);if(r<0)return"";let a="";const{length:o}=n;return o<=1?a="":r===o-1?a=n[r-1].fe_id:a=n[r+1].fe_id,a}function xe(t,s){const{selectedId:n,componentList:r}=t,a=r.findIndex(o=>o.fe_id===n);a<0?t.componentList.push(s):t.componentList.splice(a+1,0,s),t.selectedId=s.fe_id}const Os={selectedId:"",componentList:[],copiedComponent:null},$e=U({name:"components",initialState:Os,reducers:{resetComponents:(t,s)=>s.payload,changeSelectedId:(t,s)=>{t.selectedId=s.payload},addComponent:(t,s)=>{const n=s.payload;xe(t,n)},changeComponentProps:(t,s)=>{const{fe_id:n,newProps:r}=s.payload,a=t.componentList.find(o=>o.fe_id===n);a&&(a.props={...a.props,...r})},removeSelectedComponent:t=>{const{componentList:s=[],selectedId:n}=t,r=fe(n,s);t.selectedId=r;const a=s.findIndex(o=>o.fe_id===n);s.splice(a,1)},changeComponentHidden:(t,s)=>{const{componentList:n=[]}=t,{fe_id:r,isHidden:a}=s.payload;let o="";a?o=fe(r,n):o=r,t.selectedId=o;const c=n.find(l=>l.fe_id===r);c&&(c.isHidden=a)},toggleComponentLocked:(t,s)=>{const{fe_id:n}=s.payload,r=t.componentList.find(a=>a.fe_id===n);r&&(r.isLocked=!r.isLocked)},copySelectedComponent:t=>{const{selectedId:s,componentList:n=[]}=t,r=n.find(a=>a.fe_id===s);r!=null&&(t.copiedComponent=lt(r))},pasteCopiedComponent:t=>{const{copiedComponent:s}=t;s!=null&&(s.fe_id=dt(),xe(t,s))},selectPrevComponent:t=>{const{selectedId:s,componentList:n=[]}=t,r=n.findIndex(a=>a.fe_id===s);r<=0||(t.selectedId=n[r-1].fe_id)},selectNextComponent:t=>{const{selectedId:s,componentList:n=[]}=t,r=n.findIndex(a=>a.fe_id===s);r<0||r>=n.length-1||(t.selectedId=n[r+1].fe_id)},changeComponentTitle:(t,s)=>{const{title:n,fe_id:r}=s.payload,a=t.componentList.find(o=>o.fe_id===r);a&&(a.title=n)},moveComponent:(t,s)=>{const{componentList:n}=t,{oldIndex:r,newIndex:a}=s.payload;t.componentList=ut(n,r,a)}}}),{resetComponents:Vs,changeSelectedId:Ws,addComponent:Ys,changeComponentProps:Zs,removeSelectedComponent:Js,changeComponentHidden:Xs,toggleComponentLocked:en,copySelectedComponent:tn,pasteCopiedComponent:sn,selectPrevComponent:nn,selectNextComponent:an,changeComponentTitle:rn,moveComponent:on}=$e.actions,qs=$e.reducer,Fs={title:"",description:"",js:"",css:"",isPublished:!1},De=U({name:"pageInfo",initialState:Fs,reducers:{resetPageInfo:(t,s)=>s.payload,changePageTitle:(t,s)=>{t.title=s.payload}}}),{resetPageInfo:cn,changePageTitle:ln}=De.actions,zs=De.reducer,Us=ht({reducer:{user:Pt,components:mt(qs,{limit:20,filter:pt(["component/resetComponents","component/changeSelectedId","component/selectPrevComponent","component/selectNextComponent"])}),pageInfo:zs,answerRoles:Ds}});ft.createRoot(document.getElementById("root")).render(e.jsx(xt.StrictMode,{children:e.jsx(gt,{store:Us,children:e.jsx(Rs,{})})}));export{H as M,Hs as S,an as a,Ws as b,tn as c,Xs as d,ln as e,Ks as f,Ys as g,rn as h,v as i,Zs as j,cn as k,Vs as l,on as m,Gs as n,Qs as o,sn as p,Bs as q,Js as r,nn as s,en as t,D as u};
